version: '3.9'

services:
    gateway:
        build:
            context: .
            dockerfile: Backend/Gateway/Dockerfile
        image: easv/dls/Assignment2/gateway
        ports:
            - "8081:8080"
    
    patient-service:
        build:
            context: .
            dockerfile: Backend/PS-API/Dockerfile
        image: easv/dls/Assignment2/patient-service
        ports:
            - "8082:8080"
        depends_on: 
            - gateway
    
    measurement-service:
        build:
            context: .
            dockerfile: Backend/MS-API/Dockerfile
        image: easv/dls/Assignment2/measurement-service
        ports:
            - "8083:8080"
        depends_on:
            - gateway
    
    doctor-ui:
        build:
            context: Frontend/DoctorUI/
            dockerfile: Dockerfile
        environment:
            - NODE_ENV=production
        image: easv/dls/Assignment2/doctor-ui
        ports:
            - "4201:4200"
        command: [ "ng", "serve", "--host", "0.0.0.0" ]
            
    
    patient-ui:
        build:
            context: Frontend/PatientUI/
            dockerfile: Dockerfile
        environment:
            - NODE_ENV=production
        image: easv/dls/Assignment2/patient-ui
        ports:
            - "4202:4200"
        command: [ "ng", "serve", "--host", "0.0.0.0" ]